import{_ as e}from"./chunks/3.84dc93b6.js";import{_ as t,o as c,c as r,e as p,w as o,d as s,b as a,a as n,r as F}from"./app.cf7f0c08.js";const y="/assets/1.20a26b1f.png",D="/assets/2.46493536.png",i="/assets/4.b045d844.png",A="/assets/5.016e60b0.png",C="/assets/6.0aee704e.png",d="/assets/7.24aa824c.png",h="/assets/8.070d46b9.png",O=JSON.parse('{"title":"三分钟拥有自己的 chat-gpt (开发到上线)","description":"","frontmatter":{},"headers":[{"level":2,"title":"云函数","slug":"云函数","link":"#云函数","children":[]},{"level":2,"title":"前端","slug":"前端","link":"#前端","children":[{"level":3,"title":"NO NO NO 我不允许你浪费年轻而美好的生命，life is short, you need laf 😃","slug":"no-no-no-我不允许你浪费年轻而美好的生命-life-is-short-you-need-laf","link":"#no-no-no-我不允许你浪费年轻而美好的生命-life-is-short-you-need-laf","children":[]}]},{"level":2,"title":"上线","slug":"上线","link":"#上线","children":[]}],"relativePath":"pages/quickStart/chatGPT/test.md"}'),_={name:"pages/quickStart/chatGPT/test.md"},u=n('<h1 id="三分钟拥有自己的-chat-gpt-开发到上线" tabindex="-1">三分钟拥有自己的 chat-gpt (开发到上线) <a class="header-anchor" href="#三分钟拥有自己的-chat-gpt-开发到上线" aria-hidden="true">#</a></h1><ul><li>首先你需要有一个 <code>laf</code> 账号，如果你还不知道 <code>laf</code> 是什么，参考 <a href="https://zuofeng59556.github.io/my-blog/pages/quickStart/laf/" target="_blank" rel="noreferrer">三分钟学会Laf</a></li><li>然后你还需要有一个 <code>chat-gpt</code> 的账号并且生成一个 <code>apiKey</code> (这一步可以问 <code>Google</code> )</li></ul>',2),g=n('<h2 id="云函数" tabindex="-1">云函数 <a class="header-anchor" href="#云函数" aria-hidden="true">#</a></h2><p>具备了上面这两个条件我们就可以开始啦。<br> 点击 <code>NPM</code> 依赖右边的加号 <img src="'+y+'" alt="alt 属性文本"><br> 搜索 <code>chatgpt</code> 找到对应的 <code>npm</code> 包 保存并重启应用。 <img src="'+D+`" alt="alt 属性文本"><br> 然后就可以像我一样新建一个云函数 名字叫<code>send</code>并写入以下内容（记得更换 apiKey）</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki"><code><span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> cloud </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">@lafjs/cloud</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">ctx</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">FunctionContext</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ChatGPTAPI</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">await</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">import</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">chatgpt</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ctx</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">body</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// 这里需要把 api 对象放入 cloud.shared 不然无法追踪上下文</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">api</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">cloud</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">shared</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">api</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">api</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">api</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">ChatGPTAPI</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> apiKey</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">这里需要换成你自己的apiKey哦</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">cloud</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">shared</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">set</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">api</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">api</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">res</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;">// 这里前端如果传过来 parentMessageId 则代表需要追踪上下文</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">parentMessageId</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">res</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">await</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">api</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">sendMessage</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">res</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">await</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">api</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">sendMessage</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> parentMessageId</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">parentMessageId</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">res</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="前端" tabindex="-1">前端 <a class="header-anchor" href="#前端" aria-hidden="true">#</a></h2><p>前端项目中老三样</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki"><code><span class="line"><span style="color:#676E95;">// 安装 laf sdk</span></span>
<span class="line"><span style="color:#A6ACCD;"> npm install laf</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">client</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">sdk </span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// 引入</span></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Cloud</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">laf-client-sdk</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// 创建 cloud 对象 这里换掉appid</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> cloud </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Cloud</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">baseUrl</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">https://这里换成自己的appid.laf.dev</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#82AAFF;">getAccessToken</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><p>这里我们看一下前端的核心代码，非常的简单，就是把提问的内容和上下文 <code>id</code> 传入云函数就可以了。</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki"><code><span class="line"><span style="color:#C792EA;">async</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">send</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// 我们提问的内容</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">message</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">question</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;">// 与云函数逻辑一样，有上下文 id 就传入</span></span>
<span class="line"><span style="color:#89DDFF;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">parentMessageId</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">res</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">await</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">cloud</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">invoke</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">send</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">message</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">res</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">await</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">cloud</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">invoke</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">send</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">message</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> parentMessageId</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">parentMessageId</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// 回复我们的内容在 res.text </span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;">// 这个是上下文 id</span></span>
<span class="line"><span style="color:#A6ACCD;">parentMessageId</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">res</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">id</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div>`,8),f=a("code",null,"chatgpt",-1),m=a("br",null,null,-1),b=a("br",null,null,-1),E=a("img",{src:e,alt:"alt 属性文本"},null,-1),T=a("br",null,null,-1),k=a("br",null,null,-1),v=a("code",null,"nginx",-1),x=a("code",null,"nginx",-1),P=n('<h3 id="no-no-no-我不允许你浪费年轻而美好的生命-life-is-short-you-need-laf" tabindex="-1">NO NO NO 我不允许你浪费年轻而美好的生命，life is short, you need laf 😃 <a class="header-anchor" href="#no-no-no-我不允许你浪费年轻而美好的生命-life-is-short-you-need-laf" aria-hidden="true">#</a></h3><h2 id="上线" tabindex="-1">上线 <a class="header-anchor" href="#上线" aria-hidden="true">#</a></h2><p>打开你的 <code>laf</code> 点击存储界面-&gt;点击上方加号-&gt;创建一个权限为 readonly 的存储桶（名字随意） <img src="'+i+'" alt="alt 属性文本"><br> 创建完之后 在你的前端项目中运行打包命令 我这里是 <code>npm run build</code>,打包完毕之后找到打包好的 <code>dist</code> 文件夹。<br> 像我一样把 <code>dist</code> 文件里面的所有东西都上传到我们刚刚创建的存储桶里面，记住是原封不动的上传哦，文件就是文件，文件夹就是文件夹。 <img src="'+A+'" alt="alt 属性文本"><br> 上传完毕之后，发现右上角有一个 “开启网站托管” 点一下。 <img src="'+C+'" alt="alt 属性文本"><br> 点完之后出来一个链接，我们点击一下访问看看是啥东西。 <img src="'+d+'" alt="alt 属性文本"></p><h4 id="哦-我的老天鹅呀-这不就是我刚刚开发的项目吗" tabindex="-1">哦！我的老天鹅呀 这不就是我刚刚开发的项目吗？？？ <a class="header-anchor" href="#哦-我的老天鹅呀-这不就是我刚刚开发的项目吗" aria-hidden="true">#</a></h4><p><img src="'+h+'" alt="alt 属性文本"><br> 恭喜 到这里你的项目已经上线了，快分享给你的好朋友吧！<br> 点击<a href="https://jyf6wk-chat-gpt.site.laf.dev/" target="_blank" rel="noreferrer">这里</a>查看我的 chatGPT<br> 点击<a href="https://github.com/zuoFeng59556/chatGPT" target="_blank" rel="noreferrer">这里</a>查看项目源码（样式部分是从 chatGPT 官网复制过来的有些乱）</p>',5);function q(I,N,S,M,w,V){const l=F("font");return c(),r("div",null,[u,p(l,{color:"#42b883"},{default:o(()=>[s("下面我们开始计时")]),_:1}),s("，三分钟时间用 Laf 实现一个自己的 ChatGPT！"),g,a("p",null,[s("到这一步 我们已经可以发信息给 "),f,s(" 并且拿到回复的消息了。"),m,s(" 我们只要稍微加 "),p(l,{color:"#42b883"},{default:o(()=>[s("亿点点")]),_:1}),s(" 细节，就可以变成这样。"),b,E,T,s(" 加完这点细节之后，基本开发工作就完成了，接下来就是把项目上线分享给你的朋友，顺便装个杯。"),k,s(" 说到上线我们现在应该要去 买一台服务器 安装"),v,s(" 配置"),x,s(" 解析域名 绑定域名...")]),P])}const B=t(_,[["render",q]]);export{O as __pageData,B as default};
